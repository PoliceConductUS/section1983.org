---
const GA_ID =
  typeof import.meta.env.PUBLIC_GA_MEASUREMENT_ID === "string"
    ? import.meta.env.PUBLIC_GA_MEASUREMENT_ID.trim()
    : "";
const GA_ENABLED = GA_ID.length > 0;
const GA_INLINE_SCRIPT = `
window.dataLayer = window.dataLayer || [];
function gtag() {
  dataLayer.push(arguments);
}
gtag("js", new Date());
gtag("config", ${JSON.stringify(GA_ID)});
`;
---

{
  GA_ENABLED && (
    <>
      <script
        type="text/javascript"
        is:inline
        src={`https://www.googletagmanager.com/gtag/js?id=${GA_ID}`}
      />
      <script type="text/javascript" is:inline set:html={GA_INLINE_SCRIPT} />
    </>
  )
}
